{$(document).ready((function(){let e=$("li a#delete-post-button");for(let n=0;n<e.length;n++)t(e[n]);let n=$("li a#delete-comment-button");for(let e=0;e<n.length;e++)l(n[e]);let i=$("li form#comment-form");for(let e=0;e<i.length;e++)o(i[e]);let a=$(".comment_like");for(let e=0;e<a.length;e++)s($($(a[e]).parent())[0]);let c=$(".post_like");for(let e=0;e<c.length;e++)r($($(c[e]).parent())[0]);let m=$("a#friend");for(let e=0;e<m.length;e++)$(m[e]).click((function(t){t.preventDefault(),$.ajax({url:$(m[e]).prop("href"),type:"POST",success:function(e){"Friend added"==e.message||$(`p#${e.id}`).remove()},error:function(e){console.log(e.responseText)}})}))}));let e=function(e){new Noty({type:"success",text:e,layout:"topRight",theme:"relax",timeout:1500,progressBar:!0}).show()},t=function(t){$(t).click((n=>{n.preventDefault(),$.ajax({type:"GET",url:$(t).prop("href"),success:function(t){$(`.post-${t.data.post._id}`).remove(),e(t.message)},error:function(e){console.log(e)}})}))},n=$("#new-post-form");n.submit((l=>{l.preventDefault(),$.ajax({type:"Post",url:n.attr("action"),data:n.serialize(),success:async function(n){let l=a(n.data.post,n.name);$(".posts>ul").prepend(l),e(n.message),t($("a#delete-post-button",l)),r(l),o($("form#comment-form",l))},error:function(e){console.log(e.responseText)}})}));let o=function(t){$(t).submit((function(n){n.preventDefault(),$.ajax({type:"POST",url:$(t).attr("action"),data:$(t).serialize(),success:function(t){let n=i(t.data.comment);$(`#post-comments-${t.data.comment.post}`).append(n),l($("a#delete-comment-button",n)),s(n),e(t.message)},error:function(e){console.log(e.responseText)}})}))},l=function(t){$(t).click((function(n){n.preventDefault(),$.ajax({type:"GET",url:$(t).prop("href"),success:function(t){$("div#comment-id-"+t.data.comment._id).remove(),e(t.message)},error:function(e){console.log(e.responseText)}})}))},s=function(e){$(".comment_like",e).click((t=>{t.preventDefault(),$.ajax({type:"Post",url:$(".comment_like",e).prop("href"),success:function(t){if(console.log(t),"Invalid user"!=t.message)if(1==t.data.deleted){let t=$(".comment_like_value",e),n=Number(t.val())-1;t.val(n)}else{let t=$(".comment_like_value",e),n=Number(t.val())+1;t.val(n)}},error:function(e){console.log(e.responseText)}})}))},r=function(e){$(".post_like",e).click((t=>{t.preventDefault(),$.ajax({type:"Post",url:$(".post_like",e).prop("href"),success:function(t){if(console.log(t),"Invalid user"!=t.message)if(1==t.data.deleted){let t=$(".post_like_value",e),n=Number(t.val())-1;t.val(n)}else{let t=$(".post_like_value",e),n=Number(t.val())+1;t.val(n)}},error:function(e){console.log(e.responseText)}})}))},i=function(e){return $(`\n    <div id="comment-id-${e._id}" style="border: 1px rgb(0, 238, 255) solid; border-radius: 20px; box-sizing: border-box; padding: 7.5px; margin-bottom: 0.8em;">\n        <small><a id="delete-comment-button" href="/comment/destroy/${e._id}"> X </a></small>\n        ${e.content}\n        <br>\n        ${e.user.name}\n        <br>\n        \x3c!-- comment like functionality for ajax created comments --\x3e\n        <input type="text" class="comment_like_value" value="${e.likes.length}" style="width: 1em;">\n        <a href="/likes/toggle?id=${e._id}&type=Comment" class="comment_like">Like</a>\n        \n        <br>\n    </div>\n    `)},a=function(e,t){return $(`\n                <li class="post-${e._id}" >\n                    <div class="post">\n                    <p style="border: 1px black solid; border-radius: 20px; box-sizing: border-box; padding: 10px; margin-bottom: 0.8em;">\n                        <small><a id="delete-post-button" href="/post/destroy/${e._id}"> X </a></small>\n                    \n                        ${e.content}\n                        <br>\n                        ${t} creted the post! \n                    <br>\n                    \x3c!-- comment like functionality for ajax created comments --\x3e\n                    <input type="text" class="post_like_value" value="${e.likes.length}" style="width: 1em;">\n                    <a href="/likes/toggle?id=${e._id}&type=Post" class="post_like">Like</a>\n                    <br>            \n\n                    </p>\n                <p>Comments</p>\n                    \n                    <div id="post-comments-${e._id}">\n                    \n                    </div>\n\n                    \n                    \n                    <section>\n                        <form id="comment-form" action="/comment/create" method="post">\n                            <input type="hidden" name="post_id" value=${e._id} >\n                            <textarea name="comment" cols="30" rows="3" placeholder="Write Comment...." required></textarea>\n                            <input type="submit" value="Submit Comment!!">\n                        </form>\n                    </section>\n                    \n                    </div>\n                </li>`)}}